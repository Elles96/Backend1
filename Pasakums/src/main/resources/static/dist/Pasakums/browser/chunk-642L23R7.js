import{c as x}from"./chunk-JWJQ5RLQ.js";import{a as C,b as F,c as p,d as f,e as b,f as P}from"./chunk-JPQLGT5O.js";import{e as S,i as j}from"./chunk-OA6SNV5H.js";import{Ca as d,Da as u,Fa as L,Ga as y,H as v,Ja as w,Ka as s,La as i,M as n,Ma as g,Ra as M,Ta as m,aa as l,ma as a,va as h}from"./chunk-WPM3UVLA.js";var c=class t{URL=P.apiUrl;http=n(j);deleteAccount(e){return this.http.delete(`${this.URL}/user/${e}`,{observe:"response"})}login(e){return this.http.post(this.URL+"/user",e,{observe:"response"})}static \u0275fac=function(o){return new(o||t)};static \u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})};function D(t,e){t&1&&(s(0,"small",10),m(1," Please fix the errors above before submitting! "),i())}var U=class t{userService=n(c);router=n(x);userSignal=l({username:"",password:""});loginForm=C(this.userSignal,e=>{b(e.username,{message:"Username is required"}),f(e.username,3,{message:"Username must be at least 3 characters"}),p(e.username,25,{message:"Username cannot exceed 25 characters"}),b(e.password,{message:"Password is required"}),f(e.password,4,{message:"Password must be at least 4 characters"}),p(e.password,50,{message:"Password cannot exceed 50 characters"})});errorMsg=l("");successMsg=l("");onClick(){this.errorMsg.set(""),this.successMsg.set(""),this.userService.login(this.userSignal()).subscribe({next:e=>{e.status===200&&e.body!==null?(this.successMsg.set("Login successful!"),this.router.navigate(["/events"])):this.errorMsg.set("Login failed. Please check your credentials.")},error:e=>{this.errorMsg.set("Login error: "+(e.message||e))}})}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=h({type:t,selectors:[["app-login"]],decls:16,vars:6,consts:[[1,"container-fluid","bg"],[1,"row","justify-content-center"],[1,"col","text-center"],[1,"fw-bold","text-white"],[1,"row","justify-content-center","mt-4"],[1,"col-md-4"],["type","text","placeholder","Username",1,"form-control","mb-3",3,"field"],["type","password","placeholder","Password",1,"form-control","mb-3",3,"field"],[1,"col-md-4","text-center"],["type","button",1,"btn","btn-primary",3,"click","disabled"],[1,"text-danger","text-center"]],template:function(o,r){o&1&&(s(0,"div",0)(1,"form")(2,"div",1)(3,"div",2)(4,"h2",3),m(5,"Please log in"),i()()(),s(6,"div",4)(7,"div",5),g(8,"input",6),d(),i(),s(9,"div",5),g(10,"input",7),d(),i()(),s(11,"div",1)(12,"div",8)(13,"button",9),M("click",function(){return r.onClick()}),m(14," Log in! "),i(),L(15,D,2,0,"small",10),i()()()()),o&2&&(a(8),u(r.loginForm.username),a(2),u(r.loginForm.password),a(3),w("disabled",!r.loginForm().valid()),a(2),y(!r.loginForm().valid()&&r.loginForm.username().touched()&&r.loginForm.password().touched()?15:-1))},dependencies:[S,F],encapsulation:2})};export{U as Login};
